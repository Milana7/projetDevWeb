security:
  # https://symfony.com/doc/current/security.html#where-do-users-come-from-user-providers
  providers:
    y_provider:
      entity:
        #Chemin vers l entite
        class: App\Entity\User
        #Propriete utilisee pour l authentification
        property: mail
  firewalls:
    dev:
      pattern: ^/(_(profiler|wdt)|css|images|js)/
      security: false
    main:
      pattern: ^/
        provider: my_provider
        anonymous: true
        #Route pour le login et la validation du login
        form_login:
          login_path: login
          check_path: login

        #En cas de changement d utilisateur on logout l ancien
        logout_on_user_change: true

        #Route pour le logout
        logout:
          path: logout
          target: main_home

        remember_me:
          secret:   '%kernel.secret%'
          lifetime: 604800 # 1 week in seconds
          path:     /


  # Easy way to control access for large sections of your site
  # Note: Only the *first* access control that matches will be used
  access_control:
    - { path: ^/admin, roles: ROLE_ADMIN }
    - { path: ^/sortie, roles: ROLE_USER }
    - { path: ^/utilisateur, roles: ROLE_USER }

      #hierarchy des roles: ici ROLE_ADMIN a aussi les droits de ROLE_USER
      #role_hierarchy:
      #    ROLE_ADMIN: ROLE_USER

    #Encodage pour le mot de passe
    encoders:
      App\Entity\User:
        algorithm: argon2i